@* @model AdSystem.Models.Website
@{
    ViewData["Title"] = "Edit Website";
}

<div class="container mt-4">
    <h2 class="mb-4">✏️ Edit Website</h2>

    <form asp-action="Edit" method="post">
        <input type="hidden" asp-for="Id" />

        <div class="mb-3">
            <label asp-for="Name" class="form-label"></label>
            <input asp-for="Name" class="form-control" />
            <span asp-validation-for="Name" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="Domain" class="form-label"></label>
            <input asp-for="Domain" class="form-control" />
            <span asp-validation-for="Domain" class="text-danger"></span>
        </div>

        <button type="submit" class="btn btn-primary">💾 Update</button>
        <a asp-action="Index" class="btn btn-secondary">Cancel</a>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
} *@
@model AdSystem.Models.Website
@{
    ViewData["Title"] = "تعديل الموقع";
}

<!-- Page Header -->
<div class="page-header">
    <div class="d-flex align-items-center justify-content-between flex-wrap gap-3">
        <div>
            <div class="d-flex align-items-center gap-2 mb-2">
                <a asp-action="Index" class="text-decoration-none" style="color: var(--text-secondary);">
                    <i class="bi bi-arrow-right"></i>
                </a>
                <h4 class="page-title mb-0">تعديل الموقع</h4>
            </div>
            <p class="page-subtitle mb-0">تحديث معلومات الموقع</p>
        </div>
        <div class="action-buttons">
            <a asp-action="Index" class="btn btn-light">
                <i class="bi bi-x ms-1"></i>
                إلغاء
            </a>
        </div>
    </div>
</div>

<!-- Edit Form -->
<div class="row justify-content-center">
    <div class="col-12 col-lg-8">
        <div class="card shadow-sm border-0" style="border-radius: var(--radius-lg);">
            <div class="card-body p-4">
                <!-- Card Header -->
                <div class="d-flex align-items-center gap-3 mb-4 pb-4 border-bottom">
                    <div class="rounded-circle d-flex align-items-center justify-content-center"
                         style="width: 56px; height: 56px; background: var(--primary-lighter); color: var(--primary-main);">
                        <i class="bi bi-pencil-square" style="font-size: 24px;"></i>
                    </div>
                    <div>
                        <h5 class="mb-1 fw-semibold">معلومات الموقع</h5>
                        <p class="text-muted small mb-0">قم بتحديث بيانات موقعك أدناه</p>
                    </div>
                </div>

                <!-- Form -->
                <form asp-action="Edit" method="post" id="editForm">
                    <input type="hidden" asp-for="Id" />

                    <!-- Name Field -->
                    <div class="mb-4">
                        <label asp-for="Name" class="form-label fw-semibold mb-2" style="color: var(--text-primary);">
                            <i class="bi bi-tag ms-1"></i>
                            اسم الموقع
                        </label>
                        <input asp-for="Name"
                               class="form-control form-control-lg"
                               placeholder="أدخل اسم الموقع"
                               style="border-radius: var(--radius-sm); border-color: var(--gray-300);" />
                        <span asp-validation-for="Name" class="text-danger small mt-1 d-block"></span>
                        <small class="text-muted d-block mt-2">
                            <i class="bi bi-info-circle ms-1"></i>
                            استخدم اسماً وصفياً يسهل التعرف على موقعك
                        </small>
                    </div>

                    <!-- Domain Field -->
                    <div class="mb-4">
                        <label asp-for="Domain" class="form-label fw-semibold mb-2" style="color: var(--text-primary);">
                            <i class="bi bi-globe2 ms-1"></i>
                            عنوان النطاق (Domain)
                        </label>
                        <div class="input-group input-group-lg">
                            <span class="input-group-text bg-white" style="border-color: var(--gray-300);">
                                <i class="bi bi-link-45deg text-muted"></i>
                            </span>
                            <input asp-for="Domain"
                                   class="form-control"
                                   placeholder="https://example.com"
                                   style="border-color: var(--gray-300);" />
                        </div>
                        <span asp-validation-for="Domain" class="text-danger small mt-1 d-block"></span>
                        <small class="text-muted d-block mt-2">
                            <i class="bi bi-info-circle ms-1"></i>
                            يجب أن يبدأ النطاق بـ https:// أو http://
                        </small>
                    </div>

                    <!-- Action Buttons -->
                    <div class="d-flex gap-2 justify-content-end pt-3 border-top">
                        <a asp-action="Index" class="btn btn-light px-4">
                            <i class="bi bi-x ms-1"></i>
                            إلغاء
                        </a>
                        <button type="submit" class="btn btn-primary px-4">
                            <i class="bi bi-check-circle ms-1"></i>
                            حفظ التغييرات
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Info Card -->
        <div class="card shadow-sm border-0 mt-3" style="border-radius: var(--radius-lg); background: var(--info-lighter);">
            <div class="card-body p-4">
                <div class="d-flex align-items-start gap-3">
                    <div class="flex-shrink-0">
                        <i class="bi bi-lightbulb-fill" style="font-size: 24px; color: var(--info-main);"></i>
                    </div>
                    <div class="flex-grow-1">
                        <h6 class="mb-2 fw-semibold" style="color: var(--info-dark);">ملاحظات مهمة</h6>
                        <ul class="small mb-0 pe-3" style="color: var(--info-dark); line-height: 1.8;">
                            <li class="mb-2">تأكد من صحة عنوان النطاق قبل الحفظ</li>
                            <li class="mb-2">لا يمكن تغيير مفتاح السكريبت بعد إنشاء الموقع</li>
                            <li>قد تحتاج إعادة مراجعة الموقع من الإدارة بعد التعديل</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('editForm');
            const inputs = form.querySelectorAll('input[type="text"]');

            // Add focus effects to inputs
            inputs.forEach(input => {
                input.addEventListener('focus', function() {
                    this.style.borderColor = 'var(--primary-main)';
                    this.style.boxShadow = '0 0 0 3px var(--primary-lighter)';
                    this.style.transition = 'all 0.2s ease';
                });

                input.addEventListener('blur', function() {
                    this.style.borderColor = 'var(--gray-300)';
                    this.style.boxShadow = 'none';
                });
            });

            // Add smooth transitions to buttons
            const buttons = form.querySelectorAll('.btn');
            buttons.forEach(button => {
                button.style.transition = 'all 0.2s ease';

                button.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                    this.style.boxShadow = 'var(--shadow-card)';
                });

                button.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = '';
                });
            });

            // Form submission loading state
            form.addEventListener('submit', function(e) {
                const submitBtn = this.querySelector('button[type="submit"]');
                const originalHTML = submitBtn.innerHTML;

                submitBtn.disabled = true;
                submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm ms-2"></span> جاري الحفظ...';

                // Re-enable if validation fails
                setTimeout(() => {
                    if (!form.checkValidity()) {
                        submitBtn.disabled = false;
                        submitBtn.innerHTML = originalHTML;
                    }
                }, 100);
            });
        });
    </script>
}